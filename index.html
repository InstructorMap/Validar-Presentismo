<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestor y Validador de Alumnos</title>
    <style>
        body { 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; 
            background-color: #f0f2f5; 
            margin: 0; 
            padding: 20px; 
            box-sizing: border-box; 
            display: flex;
            justify-content: center;
        }
        .container { 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            gap: 30px; 
            width: 100%; 
            max-width: 550px;
        }
        .card { 
            background-color: white; 
            border-radius: 12px; 
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); 
            padding: 30px; 
            width: 100%; 
            box-sizing: border-box; 
        }
        .card h2 { 
            text-align: center; 
            margin-top: 0; 
            color: #333;
        }
        .result-card {
            display: none; /* Oculto por defecto */
            border-top: 8px solid #ccc;
            text-align: center;
        }
        .result-card.success { border-top-color: #28a745; }
        .result-card.warning { border-top-color: #dc3545; }
        .result-card.not-found { border-top-color: #6c757d; }
        .amount { 
            font-size: 1.4em; 
            font-weight: bold; 
            color: #dc3545; 
            margin-top: 15px; 
            padding: 10px; 
            border-radius: 8px; 
            background-color: #fbebee; 
        }
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 5px; font-weight: 600; color: #555; }
        .form-group input, .form-group select { 
            width: 100%; 
            padding: 12px; 
            font-size: 1.1em; 
            border-radius: 6px; 
            border: 1px solid #ccc; 
            box-sizing: border-box; 
        }
        button { 
            width: 100%; 
            padding: 12px; 
            background-color: #007bff; 
            color: white; 
            border: none; 
            border-radius: 6px; 
            font-size: 1.1em; 
            font-weight: bold; 
            cursor: pointer; 
            margin-top: 10px; 
        }
        button:hover { background-color: #0056b3; }
        button.secondary { background-color: #6c757d; }
        button.secondary:hover { background-color: #5a6268; }
        #student-count { text-align: center; color: #666; margin-top: 15px; font-size: 0.9em; }
        #export-code { margin-top: 20px; }
        #export-code textarea { width: 100%; height: 150px; font-family: monospace; }
    </style>
</head>
<body>

    <div class="container">
        <div class="card">
            <h2>üîé Validar Alumno por DNI</h2>
            <div class="form-group">
                <input type="tel" id="dni-input" placeholder="Ingrese DNI sin puntos" inputmode="numeric">
            </div>
            <button id="validate-btn">Verificar Estado</button>
            <div id="validation-result" class="result-card"></div>
        </div>

        <div class="card">
            <h2>‚ûï Agregar Nuevo Alumno</h2>
            <form id="add-student-form">
                <div class="form-group"><label for="nombre">Nombre y Apellido</label><input type="text" id="nombre" required></div>
                <div class="form-group"><label for="dni-add">DNI (solo n√∫meros)</label><input type="text" id="dni-add" pattern="\d+" required></div>
                <div class="form-group"><label for="estado">Estado de Pago</label><select id="estado" required><option value="Abon√≥">Abon√≥ Totalmente</option><option value="Debe abonar">Debe Abonar</option></select></div>
                <div class="form-group" id="monto-group" style="display:none;"><label for="monto">Monto (ej: 15000 o "No registra pago")</label><input type="text" id="monto" value="0"></div>
                <button type="submit">Guardar Alumno</button>
            </form>
            <div id="student-count"></div>
            <div id="export-code">
                <button id="export-btn" class="secondary">Exportar Lista para Backup</button>
                <textarea id="export-textarea" style="display:none;" readonly></textarea>
            </div>
        </div>
    </div>

    <script>
        // LISTA INICIAL DE ALUMNOS (Base)
        const alumnosIniciales = [
            { "dni": "96148769", "nombre": "Marta Diniz de Oliveira", "estado": "Abon√≥", "monto": 0 },
            { "dni": "29512322", "nombre": "Gustavo Javier Guzm√°n", "estado": "Abon√≥", "monto": 0 },
            { "dni": "20551091", "nombre": "Silvia Elizabeth Contreras", "estado": "Abon√≥", "monto": 0 },
            { "dni": "26033305", "nombre": "Gim√©nez Gloria", "estado": "Abon√≥", "monto": 0 },
            { "dni": "17499879", "nombre": "Estela In√©s Carballo", "estado": "Abon√≥", "monto": 0 },
            { "dni": "36427231", "nombre": "Olga Haydee Filippa", "estado": "Abon√≥", "monto": 0 },
            { "dni": "14635659", "nombre": "Fabi√°n Ferreyra", "estado": "Abon√≥", "monto": 0 },
            { "dni": "93187178", "nombre": "Jaqueline Loreley Parra Antunez", "estado": "Abon√≥", "monto": 0 },
            { "dni": "95268711", "nombre": "Mirta Ayala", "estado": "Abon√≥", "monto": 0 },
            { "dni": "32835350", "nombre": "Carolina Elizabeth Beatriz Orcesi", "estado": "Abon√≥", "monto": 0 },
            { "dni": "96072490", "nombre": "Susana Carolina Gomez Mora", "estado": "Abon√≥", "monto": 0 },
            { "dni": "27078944", "nombre": "Sabina Gabriela Cardozo", "estado": "Abon√≥", "monto": 0 },
            { "dni": "30280273", "nombre": "Javier Norberto Maidana", "estado": "Abon√≥", "monto": 0 },
            { "dni": "31757228", "nombre": "Mar√≠a Florencia Marinaro", "estado": "Abon√≥", "monto": 0 },
            { "dni": "21330740", "nombre": "Claudia Noem√≠ Acosta", "estado": "Abon√≥", "monto": 0 },
            { "dni": "32580393", "nombre": "Sara Elisa Ruiz D√≠az", "estado": "Abon√≥", "monto": 0 },
            { "dni": "27295459", "nombre": "Elvira Dolores Mino Galvez", "estado": "Abon√≥", "monto": 0 },
            { "dni": "38616235", "nombre": "Robles Katherine", "estado": "Abon√≥", "monto": 0 },
            { "dni": "36824340", "nombre": "Olmedo Moya Evelin Soledad", "estado": "Abon√≥", "monto": 0 },
            { "dni": "94971738", "nombre": "Luis Emiro Quintero Mora", "estado": "Abon√≥", "monto": 0 },
            { "dni": "94315221", "nombre": "Gonzalo Lenis", "estado": "Abon√≥", "monto": 0 },
            { "dni": "40304778", "nombre": "Samantha Daiana Salinas", "estado": "Abon√≥", "monto": 0 },
            { "dni": "21863236", "nombre": "Karina Gladys Mazzella", "estado": "Abon√≥", "monto": 0 },
            { "dni": "20585768", "nombre": "Delia Beatriz Rosa", "estado": "Abon√≥", "monto": 0 },
            { "dni": "19073961", "nombre": "Laime Karina Paola", "estado": "Abon√≥", "monto": 0 },
            { "dni": "94427917", "nombre": "Laura Mabel Sanabria Alvarez", "estado": "Abon√≥", "monto": 0 },
            { "dni": "45177582", "nombre": "Candela Diaz", "estado": "Abon√≥", "monto": 0 },
            { "dni": "26515114", "nombre": "Sandra Liliana Taibo", "estado": "Abon√≥", "monto": 0 },
            { "dni": "28903677", "nombre": "Analia Pabla Badaracco", "estado": "Abon√≥", "monto": 0 },
            { "dni": "19100128", "nombre": "Rosa Elvira Otaegui Campero", "estado": "Abon√≥", "monto": 0 },
            { "dni": "96435404", "nombre": "Christian Ren√© Nogales Zamora", "estado": "Abon√≥", "monto": 0 },
            { "dni": "20023652", "nombre": "Pablo Minteguia", "estado": "Abon√≥", "monto": 0 },
            { "dni": "31674877", "nombre": "Martin Ignacio del Rio", "estado": "Abon√≥", "monto": 0 },
            { "dni": "37998389", "nombre": "Daniel Hugo Prieto", "estado": "Abon√≥", "monto": 0 },
            { "dni": "22990008", "nombre": "De Lorenzo Vanina", "estado": "Abon√≥", "monto": 0 },
            { "dni": "39201085", "nombre": "Celia Griselda Salas", "estado": "Abon√≥", "monto": 0 },
            { "dni": "40860734", "nombre": "Marisol Leonela Rodriguez", "estado": "Abon√≥", "monto": 0 },
            { "dni": "36450714", "nombre": "Gabriela Lourdes Cruz", "estado": "Abon√≥", "monto": 0 },
            { "dni": "39159113", "nombre": "Alejander Daniel Flores", "estado": "Abon√≥", "monto": 0 },
            { "dni": "36794643", "nombre": "Marcelo German Mierez", "estado": "Debe abonar", "monto": 15000 },
            { "dni": "94944238", "nombre": "Vianca Dalila Sanabria", "estado": "Debe abonar", "monto": 15000 },
            { "dni": "96130126", "nombre": "Israel Kanku", "estado": "Debe abonar", "monto": "No registra pago" },
            { "dni": "96156359", "nombre": "Daniel Zeballos Rodriguez", "estado": "Debe abonar", "monto": "No registra pago" },
            { "dni": "39875858", "nombre": "Trisi Maria Florencia", "estado": "Debe abonar", "monto": "No registra pago" },
            { "dni": "40896181", "nombre": "Ulises Tom√°s G√≥mez", "estado": "Debe abonar", "monto": "No registra pago" },
            { "dni": "26934717", "nombre": "Maria Martinez", "estado": "Debe abonar", "monto": "No registra pago" },
            { "dni": "94006892", "nombre": "Alicia Maidana", "estado": "Debe abonar", "monto": "No registra pago" },
            { "dni": "27827521", "nombre": "Herrera Lorena Silvana", "estado": "Debe abonar", "monto": "No registra pago" },
            { "dni": "96287907", "nombre": "Rosa Mayorga", "estado": "Debe abonar", "monto": "No registra pago" },
            { "dni": "95965099", "nombre": "Alessandra Leal Rosa", "estado": "Debe abonar", "monto": "No registra pago" },
            { "dni": "29004235", "nombre": "Garcia Daniela Lucia", "estado": "Debe abonar", "monto": "No registra pago" },
            { "dni": "29824760", "nombre": "Barrios Aguilar Marco Antonio", "estado": "Debe abonar", "monto": "No registra pago" },
            { "dni": "94510736", "nombre": "Tania Beatriz Ayala", "estado": "Debe abonar", "monto": "No registra pago" },
            { "dni": "95156377", "nombre": "Adriana Adelina Rojas Becerra", "estado": "Debe abonar", "monto": "No registra pago" },
        ];

        let alumnos = [];

        // --- L√ìGICA DE CARGA Y GUARDADO EN NAVEGADOR ---
        function guardarAlumnos() { localStorage.setItem('listaAlumnosCurso', JSON.stringify(alumnos)); }
        function cargarAlumnos() {
            const alumnosGuardados = localStorage.getItem('listaAlumnosCurso');
            alumnos = alumnosGuardados ? JSON.parse(alumnosGuardados) : [...alumnosIniciales];
            actualizarContador();
        }
        function actualizarContador() {
            document.getElementById('student-count').textContent = `Total de alumnos registrados: ${alumnos.length}`;
        }

        // --- L√ìGICA DE VALIDACI√ìN ---
        function realizarValidacion(dniBuscado) {
            const resultDiv = document.getElementById('validation-result');
            if (!dniBuscado || dniBuscado.trim() === '') {
                resultDiv.style.display = 'none';
                return;
            }

            const alumnoEncontrado = alumnos.find(a => a.dni === dniBuscado.trim());
            resultDiv.style.display = 'block'; // Mostrar el cuadro de resultado

            if (alumnoEncontrado) {
                if (alumnoEncontrado.estado === 'Abon√≥') {
                    resultDiv.className = 'result-card success';
                    resultDiv.innerHTML = `<h2>¬°Pago Confirmado!</h2><p>${alumnoEncontrado.nombre}</p>`;
                } else {
                    resultDiv.className = 'result-card warning';
                    const monto = typeof alumnoEncontrado.monto === 'number' ? `$${alumnoEncontrado.monto}` : alumnoEncontrado.monto;
                    resultDiv.innerHTML = `<h2>Pago Pendiente</h2><p>${alumnoEncontrado.nombre}</p><div class="amount">Estado: ${monto}</div>`;
                }
            } else {
                resultDiv.className = 'result-card not-found';
                resultDiv.innerHTML = `<h2>DNI no encontrado</h2><p>El DNI ${dniBuscado} no figura en la lista.</p>`;
            }
        }

        // --- C√ìDIGO PRINCIPAL ---
        document.addEventListener('DOMContentLoaded', () => {
            cargarAlumnos();

            const validateBtn = document.getElementById('validate-btn');
            const dniInput = document.getElementById('dni-input');
            validateBtn.addEventListener('click', () => realizarValidacion(dniInput.value));
            dniInput.addEventListener('keypress', (e) => { if (e.key === 'Enter') realizarValidacion(dniInput.value); });

            // --- L√≥gica del formulario para agregar alumnos ---
            const estadoSelect = document.getElementById('estado');
            const montoGroup = document.getElementById('monto-group');
            const addStudentForm = document.getElementById('add-student-form');
            estadoSelect.addEventListener('change', () => { montoGroup.style.display = estadoSelect.value === 'Debe abonar' ? 'block' : 'none'; });

            addStudentForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const dni = document.getElementById('dni-add').value.trim();
                if (alumnos.some(a => a.dni === dni)) {
                    alert('Error: Ya existe un alumno con ese DNI.');
                    return;
                }
                const nombre = document.getElementById('nombre').value.trim();
                const estado = document.getElementById('estado').value;
                let montoInput = document.getElementById('monto').value;
                let montoFinal = (estado === 'Abon√≥') ? 0 : (isNaN(parseInt(montoInput)) ? montoInput : parseInt(montoInput));
                
                alumnos.push({ dni, nombre, estado, monto: montoFinal });
                guardarAlumnos();
                actualizarContador();
                alert(`¬°Alumno "${nombre}" agregado con √©xito!`);
                addStudentForm.reset();
                montoGroup.style.display = 'none';
            });
            
            // --- L√≥gica de exportaci√≥n ---
            const exportBtn = document.getElementById('export-btn');
            const exportTextarea = document.getElementById('export-textarea');
            exportBtn.addEventListener('click', () => {
                exportTextarea.value = `const alumnosIniciales = ${JSON.stringify(alumnos, null, 4)};`;
                exportTextarea.style.display = 'block';
                exportTextarea.select();
                alert('C√≥digo de la lista completa generado. C√≥pialo para actualizar tu archivo .html y tener un backup.');
            });
        });
    </script>

</body>
</html>
